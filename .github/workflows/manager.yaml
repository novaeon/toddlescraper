name: Manager Workflow
env:
  ALLSECRETS: ${{ toJSON(secrets) }}
on:
  workflow_dispatch:
jobs:
  update:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
      - name: Checking out repo
        uses: actions/checkout@v3
      - name: Setting up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - name: Installing package list
        run: apt list --installed    
        
      - name: Installing all necessary packages
        run: pip install PyYAML

      - name: Running the Python script
        run: python manager.py
        
      - name: Commit and Push The Results From Manager
        run: |
         git remote set-url origin https://novaeon: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@github.com/novaeon/toddlescraper.git
         git config --global user.name "github-actions[bot]"
         git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
         git add -A
         git commit -m "GitHub Manager added"
         git push
